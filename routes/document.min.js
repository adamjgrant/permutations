var express=require("express"),router=express.Router();const fs=require("fs");router.post("/:document_id",function(e,r,n){const o=e.params.document_id;let s=JSON.parse(e.body);JSON.parse(s)&&(s=JSON.stringify(JSON.parse(s),null,2)),fs.writeFile(`documents/${o}.json`,s,function(e){if(e)return console.log(e);r.send(`Saved ${s} as ${o}.json`)})}),router.get("/:document_id/raw",function(e,r,n){const o=e.params.document_id;fs.readFile(`documents/${o}.json`,"utf8",(e,n)=>{if(e)return void console.error(e);r.setHeader("Content-Type","application/json");const o=JSON.stringify(JSON.parse(n),null,2);r.send(o)})}),router.get("/:document_id",function(e,r,n){const o=e.params.document_id;fs.readFile(`documents/${o}.json`,"utf8",(e,n)=>{if(e)return console.error(e),void r.send(e);try{if(JSON.parse(n)){beautify(JSON.parse(n),null,2,1)}else{}r.send(response)}catch(e){r.send(e)}})}),module.exports=router;