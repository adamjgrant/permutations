class Mozart{constructor(t){return this.name=t,Mozart.index[this.name]=this,this.function_methods=[],this.object_methods={priv:[],pub:[]},this}add_function_method(t,n){this.function_methods.push(n),this[t]=n}add_object_method(t,n,e){e?this.object_methods.priv.push([t,n]):(this.object_methods.pub.push([t,n]),this[t]=n)}parse_object(t,n){var e={};for(var o in t)((t,n,e,o)=>{"priv"!=e&&(n[e]=(n=>o.call(this,t,n,e)))})(t,e,o,n);return e}acts(t){var n=this.parse_object(t.priv,(t,n,e)=>{var o=this.scoped_selector();return t[e](o,n)});this.add_object_method("act",n,!0),this.add_object_method("acts",n,!0);var e=this.parse_object(t,(t,n,e)=>{var o=this.scoped_selector();return t[e](o,n)});this.add_object_method("act",e),this.add_object_method("acts",e)}act(t){return this.acts(t)}routes(t){var n=this.parse_object(t,(t,n,e)=>{var o=JSON.parse(JSON.stringify(t[e]));return o.url=t[e].url.interpolate(n),o.data=n,Object.keys(n).forEach(n=>{t[e].url.match(n)&&delete o.data[n]}),o});this.add_object_method("route",n),this.add_object_method("routes",n)}route(t){return this.routes(t)}config(t){this.add_object_method("config",t)}events(t){this.add_function_method("events",t),this.add_function_method("event",t)}event(t){return this.events(t)}scoped_selector(){var t=t=>{var n=`[data-component~='${this.name}'] ${t}`;if("function"==typeof jQuery)return $(n);var e=document.querySelectorAll(t);return 1==e.length?e[0]:e};return this.object_methods.pub.concat(this.object_methods.priv).forEach(n=>{var e,o;[e,o]=n,t[e]=t[e]||{},Object.keys(o).forEach(n=>{t[e][n]=o[n]})}),t}init(){this.function_methods.forEach(t=>{t(this.scoped_selector())})}}Mozart.index={},Mozart.init=(()=>{for(var t in Mozart.index)Mozart.index[t].init()}),String.prototype.interpolate=function(t){return this.replace(/#\{(.+?)\}/g,function(n,e){var o=t[e];return"string"==typeof o||"number"==typeof o?o:n})};